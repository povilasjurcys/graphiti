# frozen_string_literal: true

require 'rails_helper'

RSpec.describe GraphqlRouter do
  subject(:schema) { described_class.graphql_schema }

  describe '#to_definition' do
    subject(:to_definition) { schema.to_definition.strip }

    let(:schema_dump_path) { Rails.root.join('spec', 'fixtures', 'graphql_schema.graphql') }
    let(:previous_definition) { File.read(schema_dump_path).strip }

    it 'returns correct structure' do
      # if you need to update saved_schema, run rake task:
      #   $ RAILS_ENV=test bin/rake graphql_rails:schema:dump

      expect(to_definition).to eq(previous_definition)
    end
  end
end
